<!DOCTYPE html>
<html ng-app="nlapp">
<head>
<meta charset="UTF-8">
<title>AngularJS Test</title>
<script src="js/jquery.min.js"></script>
<script src="js/angular.min.js"></script>
<script src="js/ng-infinite-scroll.min.js"></script>
</head>
<body ng-controller="TestController">
  <section infinite-scroll='loadmore()' infinite-scroll-disabled='!ready2scroll'>
    <div style="position:fixed;top:20px;right:20px">
      <p>{{"Total "+data.newsMetaList.length+" items"}}</p>
    </div>
    <div ng-repeat="news in data.newsMetaList" style="height:200px">
      <p>{{news.newsID}}</p>
    </div>
  </section>
  <script>
	angular.module("nlapp", ['infinite-scroll']).controller("TestController", function($scope, $http){
		var loadmore = function() {
			$scope.ready2scroll = false;

			$http({method: 'GET', url: '//api.nl.com/news', params: {page_num: $scope.nextPage}}).success(
				function (data, status, headers, config, statusText) {
					if (typeof data.newsMetaList != 'undefined') {
						$.merge($scope.data.newsMetaList, data.newsMetaList);
						$scope.nextPage++;
						$scope.ready2scroll = true;
					}
				}
			);
		};
		
		$scope.ready2scroll = false;
		$scope.nextPage = 0;
		$scope.data = {newsMetaList: []};
		$scope.loadmore = loadmore;
		
		loadmore();
	});
  </script>
</body>
</html>